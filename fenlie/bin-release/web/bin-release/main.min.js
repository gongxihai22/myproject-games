var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var s=RES.getRes(e);s?n(s):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var GameBeginBtn=function(e){function t(t){e.call(this),this.hand_posY=0,this.skinName="src/components/GameBeginBtnSkin.exml",this.myStage=t,this.myStage.addChild(this),this.camera_effect.alpha=0,this.hand_posY=this.game_begin_hand_btn.y,this.game_begin_hand_btn.y=1200}__extends(t,e);var i=(__define,t),n=i.prototype;return n.ShowBtnEffect=function(){var e=this;e.x=-500,e.tween_camera=egret.Tween.get(this);var t=this.tween_camera;this.enabled=!1,e.tween_camera.to({x:0},1e3).call(function(){e.addEventListener(egret.Event.ENTER_FRAME,this.ShowEffectFunc,this),t.pause()})},n.ShowEffectFunc=function(){this.camera_effect.alpha+=.2,this.game_begin_hand_btn.y-=20,this.game_begin_hand_btn.y<=this.hand_posY&&(this.enabled=!0,this.game_begin_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.EnterGameBtnFunc,this),this.game_begin_btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBeginFunc,this),this.game_begin_hand_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.EnterGameBtnFunc,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.ShowEffectFunc,this),this.tween_hands=egret.Tween.get(this.game_begin_hand_btn,{loop:!0}),this.tween_hands.to({y:this.hand_posY+20},500).to({y:this.hand_posY},500))},n.TouchBeginFunc=function(){this.game_begin_btn.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBeginFunc,this);this.hand_group.visible=!1},n.EnterGameBtnFunc=function(){null!=this.myStage&&(this.tween_hands.pause(),this.game_begin_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.EnterGameBtnFunc,this),this.game_begin_hand_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.EnterGameBtnFunc,this),this.myStage.removeChild(this)),GameController.getInstance().EnterGame()},t}(eui.Component);egret.registerClass(GameBeginBtn,"GameBeginBtn");var GameBeginPage=function(e){function t(){e.call(this),this.textFlg=0,this.skinName="src/components/GameBeginSkin.exml",this.game_begin_stars.alpha=1,this.texts=new Array,this.texts.push(this.game_begin_text0),this.texts.push(this.game_begin_text1),this.texts.push(this.game_begin_text2),this.TextShowEffect(),this.StarsEffect()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.StarsEffect=function(){this.startTimer=new egret.Timer(1e3,0),this.startTimer.addEventListener(egret.TimerEvent.TIMER,this.StarsTimerFunc,this)},n.StarsTimerFunc=function(){this.game_begin_stars.alpha=Math.random()},n.TextShowEffect=function(){for(var e=0;e<this.texts.length;e++)this.texts[e].alpha=0;this.textTimer=new egret.Timer(50,0),this.textTimer.addEventListener(egret.TimerEvent.TIMER,this.TextTimerFunc,this),this.textTimer.start()},n.TextTimerFunc=function(){if(this.texts[this.textFlg].alpha>=1?this.textFlg++:this.texts[this.textFlg].alpha+=.1,this.textFlg==this.texts.length){this.textTimer.removeEventListener(egret.TimerEvent.TIMER,this.TextTimerFunc,this);for(var e=0;e<this.texts.length;e++)this.texts[e].alpha=1;this.startTimer.start(),GameController.getInstance().ShowGameEnterBtn()}this.textFlg==this.texts.length-1&&GameController.getInstance().ShowGameEnterBtn()},t}(eui.Component);egret.registerClass(GameBeginPage,"GameBeginPage");var GameController=function(){function e(){this.gameTotal=0}var t=(__define,e),i=t.prototype;return e.getInstance=function(){return null==this.gameController&&(this.gameController=new e),this.gameController},i.GameInit=function(e){this.myStage=e,this.beginPage=new GameBeginPage,this.myStage.addChild(this.beginPage),this.gamePlayBG=new GamePlayBG,this.gameSound=new GameSoundPage},i.ShowGameEnterBtn=function(){this.myStage.contains(this.beginBtn)||(this.beginBtn=new GameBeginBtn(this.beginPage),this.beginBtn.ShowBtnEffect())},i.EnterGame=function(){this.myStage.removeChild(this.beginPage),this.myStage.addChild(this.gameSound),this.myStage.addChild(this.gamePlayBG),this.myStage.addChild(new GameTipPage(this.myStage))},i.PlayStartBtnEffect=function(){this.gamePlayBG.StartBtnEffect(),this.gameTime=new GameTimeControl,this.myStage.addChild(this.gameTime),this.gameTime.x=20,this.gameTime.y=40},i.TimeStart=function(){this.gameTime.StartTime()},i.TimeOver=function(){this.myStage.removeChild(this.gameTime),this.gamePlayBG.StopGame(),this.gameRestart=new GameRestartPage,this.myStage.addChild(this.gameRestart)},i.GameOver=function(){this.myStage.removeChild(this.gamePlayBG),this.gameOver=new GameOverPage(this.gameTotal),this.myStage.addChild(this.gameOver)},i.GameRestart=function(){this.gameTotal=0,this.gamePlayBG.RestartGame(),this.gameTime=new GameTimeControl,this.myStage.addChild(this.gameTime),this.gameTime.x=20,this.gameTime.y=40},i.GameTotal=function(e){this.gameTotal+=e,this.gameTotal=this.gameTotal<=0?0:this.gameTotal},i.ClearGameTotal=function(){this.gameTotal=0},i.AddSpeed=function(){this.gamePlayBG.AddGameSpeed()},e}();egret.registerClass(GameController,"GameController");var GameElement=function(e){function t(){e.call(this),this.isUseful=!1,this.skinName="src/components/GameElementSkin.exml"}__extends(t,e);var i=(__define,t),n=i.prototype;return n.IsUserful=function(){return this.isUseful},n.IsUserFul=function(e){this.isUseful=e},n.init=function(e){this.restetButton(),this.SetButton(e),this.isUseful=!0},n.SetButton=function(e){switch(e){case t.ELEMENT_EGG_1:this.group_egg1.visible=!0,this.element_egg1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementEgg1OnClick,this);break;case t.ELEMENT_EGG_2:this.group_egg2.visible=!0,this.element_egg2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementEgg2OnClick,this);break;case t.ELEMENT_CRAMERA_1:this.group_camera1.visible=!0,this.element_camera1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementCamera1OnClick,this);break;case t.ELEMENT_CRAMERA_2:this.group_camera2.visible=!0,this.element_camera2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementCamera2OnClick,this)}},n.restetButton=function(){this.group_egg1.visible=!1,this.group_egg2.visible=!1,this.group_camera1.visible=!1,this.group_camera2.visible=!1,this.tip_wrong_egg1.visible=!1,this.tip_wrong_egg2.visible=!1,this.tip_right_camera1.visible=!1,this.tip_right_camera2.visible=!1},n.ElementEgg1OnClick=function(){this.tip_wrong_egg1.visible=!0,this.element_egg1.visible=!1,this.element_egg1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementEgg1OnClick,this),this.ClickTipHide(this.tip_wrong_egg1),GameController.getInstance().ClearGameTotal()},n.ElementEgg2OnClick=function(){this.tip_wrong_egg2.visible=!0,this.element_egg2.visible=!1,this.element_egg2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementEgg2OnClick,this),this.ClickTipHide(this.tip_wrong_egg2),GameController.getInstance().GameTotal(-1)},n.ElementCamera1OnClick=function(){this.tip_right_camera1.visible=!0,this.element_camera1.visible=!1,this.element_camera1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementCamera1OnClick,this),this.ClickTipHide(this.tip_right_camera1),GameController.getInstance().GameTotal(2)},n.ElementCamera2OnClick=function(){this.tip_right_camera2.visible=!0,this.element_camera2.visible=!1,this.element_camera2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.ElementCamera2OnClick,this),this.ClickTipHide(this.tip_right_camera2),GameController.getInstance().GameTotal(2)},n.ClickTipHide=function(e){setTimeout(function(){e.visible=!1},500),this.isUseful=!1},t.ELEMENT_EGG_1=0,t.ELEMENT_EGG_2=1,t.ELEMENT_CRAMERA_1=2,t.ELEMENT_CRAMERA_2=3,t}(eui.Component);egret.registerClass(GameElement,"GameElement");var GameLoading=function(e){function t(){e.call(this),this.skinName="src/components/GameLoadingSkin.exml",this.barWidth=this.loadingBar.width,this.loadingBar.width=0}__extends(t,e);var i=(__define,t),n=i.prototype;return n.setProgress=function(e,t){var i=Math.floor(e/t*100);this.loadingText.text=i.toString()+"%",this.loadingBar.width=e/t*this.barWidth},t}(eui.Component);egret.registerClass(GameLoading,"GameLoading");var GameOverPage=function(e){function t(t){e.call(this),this.oneTotal_Xpos=308,this.twoTotal_Xpos=[295,324],this.threeTotal_Xpos=[277,304,332],this.skinName="src/components/GameOverSkin.exml",this.init(t)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(e){function t(){var e=document.getElementById("gameDiv"),t=document.createElement("img");t.src="resource/assets/res/game_tower.png",t.style.width="48%",t.style.left="50%",t.style.marginLeft="-25%",t.style.position="absolute",t.style.top="60%",e.appendChild(t),g.visible=!1}function i(){s[0].visible=!0;var e=new egret.Timer(200,0);e.addEventListener(egret.TimerEvent.TIMER,n,this),e.start()}function n(){s[0].visible?(s[0].visible=!1,s[1].visible=!0):s[1].visible?(s[1].visible=!1,s[2].visible=!0):s[2].visible&&(s[2].visible=!1,s[0].visible=!0)}this.SetNum(e),this.SetLabel(e),this.tower_Ypos=this.game_tower.y,this.game_tower.y=500,this.leftLg_Xpos=this.lighting_left.x,this.lighting_left.x=-200,this.rightLg_Xpos=this.lighting_right.x,this.lighting_right.x=500;var s=[];s.push(this.dianbo_1),s.push(this.dianbo_2),s.push(this.dianbo_3);for(var r=0;r<s.length;r++)s[r].visible=!1;var a=egret.Tween.get(this.game_tower),h=this.lighting_left,o=this.leftLg_Xpos,m=this.lighting_right,l=this.rightLg_Xpos;a.to({y:this.tower_Ypos},500).call(function(){var e=egret.Tween.get(h);e.to({x:o},200);var n=egret.Tween.get(m);n.to({x:l},50),i(),t()});var g=this.game_tower},n.SetNum=function(e){if(e>=100){var t=parseInt((e/100).toString()),i=parseInt(((e-100*t)/10).toString()),n=parseInt((e%10).toString());this.num1.source="total_"+i.toString()+"_png",this.num2.source="total_"+n.toString()+"_png",this.num0.source="total_"+t.toString()+"_png",this.num0.x=this.threeTotal_Xpos[0],this.num1.x=this.threeTotal_Xpos[1],this.num2.x=this.threeTotal_Xpos[2]}else{var i=parseInt((e/10).toString()),n=parseInt((e%10).toString());this.num1.source="total_"+i.toString()+"_png",this.num2.source="total_"+n.toString()+"_png",this.num1.visible=0==i?!1:!0,this.num0.visible=!1,e>=10?(this.num1.x=this.twoTotal_Xpos[0],this.num2.x=this.twoTotal_Xpos[1]):this.num2.x=this.oneTotal_Xpos}},n.SetLabel=function(e){60>e?(this.game_total_tip.text="啧啧啧～你弱爆了喂！",this.game_total_tip.textColor=10853532):120>e?(this.game_total_tip.text="分裂的不错嘛~小神经儿~",this.game_total_tip.textColor=1068248):(this.game_total_tip.text="啊啊啊～做我们的首领吧！老大！",this.game_total_tip.textColor=11932354)},t}(eui.Component);egret.registerClass(GameOverPage,"GameOverPage");var GamePlayBG=function(e){function t(){e.call(this),this.bg_posY_first=0,this.bg_posY_last=0,this.bg_posY_reset=0,this.bg_move_speed=5,this.element_move_speed=9,this.elementShow_Ypos=700,this.element_Xpos=[-120,-90,-60,-30,0,30,60,90],this.element_Types=[2,3,2,3,2,3,2,3,2,3,0,2,3,3,3,3,2,2,2,2,1,2,3,3,2],this.lastTime=egret.getTimer(),this.cacheDict={},this.element_Xpos_last=0,this.skinName="src/components/GamePlayBGSkin.exml",this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.btn_start_small.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.btn_start_big.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.game_play_bgs.mask=this.game_play_mask,this.playBGs=new Array,this.playBGs.push(this.game_play_bg0),this.playBGs.push(this.game_play_bg1),this.playBGs.push(this.game_play_bg2),this.bg_posY_first=this.game_play_bg0.y,this.bg_posY_last=this.game_play_bg1.y,this.bg_posY_reset=this.game_play_bg2.y},n.StartBtnEffect=function(){this.startBtnTimer=new egret.Timer(500,0),this.startBtnTimer.addEventListener(egret.TimerEvent.TIMER,this.StartBtnTimerFunc,this),this.startBtnTimer.start()},n.AddGameSpeed=function(){this.element_move_speed=14,this.element_timer.stop(),this.element_timer.removeEventListener(egret.TimerEvent.TIMER,this.CreatElements,this),this.element_timer=new egret.Timer(100),this.element_timer.addEventListener(egret.TimerEvent.TIMER,this.CreatElements,this),this.element_timer.start()},n.StopGame=function(){this.element_timer.stop(),this.update_timer.stop(),this.btn_start.visible=!0},n.RestartGame=function(){this.btn_start_small.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.btn_start_big.addEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.startBtnTimer.addEventListener(egret.TimerEvent.TIMER,this.StartBtnTimerFunc,this),this.startBtnTimer.start();for(var e=0;e<this.showElements.length;e++)this.game_play_bgs.removeChild(this.showElements[e]);this.cacheDict={},this.showElements=null},n.StartGame=function(){this.showElements=new Array,this.element_timer=new egret.Timer(200),this.element_timer.addEventListener(egret.TimerEvent.TIMER,this.CreatElements,this),this.element_timer.start(),this.update_timer=new egret.Timer(20),this.update_timer.addEventListener(egret.TimerEvent.TIMER,this.UpdateElementsPos,this),this.update_timer.start()},n.StartBtnTimerFunc=function(){this.btn_start_big.visible=!this.btn_start_big.visible},n.StartBtnOnClick=function(){this.btn_start_small.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.btn_start_big.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.StartBtnOnClick,this),this.btn_start.visible=!1,this.startBtnTimer.stop(),this.startBtnTimer.removeEventListener(egret.TimerEvent.TIMER,this.StartBtnTimerFunc,this),this.StartGame(),GameController.getInstance().TimeStart()},n.UpdateElementsPos=function(){for(var e=0;e<this.playBGs.length;e++)this.playBGs[e].y-=this.bg_move_speed,this.playBGs[e].y<=this.bg_posY_reset&&(this.playBGs[e].y=this.bg_posY_last);var t=egret.getTimer(),i=1e3/(t-this.lastTime);this.lastTime=t;for(var n,s=30/i,r=[],a=this.showElements.length,h=0;a>h;h++)n=this.showElements[h],n.y+=this.element_move_speed*s,n.y>=this.elementShow_Ypos&&r.push(n);for(var o=0;o<r.length;o++)n=r[o],this.game_play_bgs.removeChild(n),this.reclaim(n,"element"),this.showElements.splice(this.showElements.indexOf(n),1)},n.CreatElements=function(){function e(){var e=i[Math.floor(Math.random()*i.length)];if(e==t){var n,s=i.indexOf(e);return n=0==s||1==s?i.length-1:s-2,i[n]}return e}var t=this.element_Xpos_last,i=this.element_Xpos,n=this.produce("element");n.init(Math.floor(4*Math.random())),n.x=e(),n.y=-Math.floor(200*Math.random()),this.element_Xpos_last=n.x,this.element_Xpos_last=n.x,this.game_play_bgs.addChild(n),this.showElements.push(n)},n.produce=function(e){var t;null==this.cacheDict[e]&&(this.cacheDict[e]=[]);var i=this.cacheDict[e];return t=i.length>0?i.pop():new GameElement},n.reclaim=function(e,t){null==this.cacheDict[t]&&(this.cacheDict[t]=[]);var i=this.cacheDict[t];-1==i.indexOf(e)&&i.push(e)},t}(eui.Component);egret.registerClass(GamePlayBG,"GamePlayBG");var GameRestartPage=function(e){function t(){e.call(this),this.skinName="src/components/GameRestartPageSkin.exml",this.restart_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.RestartBtnOnClick,this),this.gameover_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.GameOverBtnOnClick,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.RestartBtnOnClick=function(){this.restart_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.RestartBtnOnClick,this),this.RemoveSelf(),GameController.getInstance().GameRestart()},n.GameOverBtnOnClick=function(){this.gameover_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.GameOverBtnOnClick,this),this.RemoveSelf(),GameController.getInstance().GameOver()},n.RemoveSelf=function(){this.parent.removeChild(this)},t}(eui.Component);egret.registerClass(GameRestartPage,"GameRestartPage");var GameSoundPage=function(e){function t(){e.call(this),this.btn_sound_toggle=!1,this.skinName="src/components/GameSoundBGSkin.exml",this.btn_sound_on.addEventListener(egret.TouchEvent.TOUCH_TAP,this.SoundBtnOnclick,this),this.btn_sound_off.addEventListener(egret.TouchEvent.TOUCH_TAP,this.SoundBtnOnclick,this),this.bg_sound=RES.getRes("bg_music_mp3"),this.sound_Channel=this.bg_sound.play()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.SoundBtnOnclick=function(){this.SetSoundBtn(this.btn_sound_toggle)},n.SetSoundBtn=function(e){e?(this.btn_sound_off.visible=!0,this.btn_sound_on.visible=!1,this.sound_Channel=this.bg_sound.play()):(this.btn_sound_off.visible=!1,this.btn_sound_on.visible=!0,this.sound_Channel.stop()),this.btn_sound_toggle=!this.btn_sound_toggle},t}(eui.Component);egret.registerClass(GameSoundPage,"GameSoundPage");var GameTimeControl=function(e){function t(){e.call(this),this.gameTime=45,this.skinName="src/components/GameTimeSkin.exml",this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){this.SetNum(this.gameTime),this.time_border_red.visible=!1,this.game_timer=new egret.Timer(1e3,this.gameTime),this.game_timer.addEventListener(egret.TimerEvent.TIMER,this.GameTimeFun,this),this.game_timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.GameTimeComplete,this),this.dangerEffect_timer=new egret.Timer(200,0),this.dangerEffect_timer.addEventListener(egret.TimerEvent.TIMER,this.TimeDangerFunc,this)},n.StartTime=function(){this.game_timer.start()},n.GameTimeFun=function(){this.gameTime-=1,this.SetNum(this.gameTime),20==this.gameTime&&GameController.getInstance().AddSpeed(),5==this.gameTime&&this.dangerEffect_timer.start()},n.TimeDangerFunc=function(){this.time_border_red.visible=!this.time_border_red.visible},n.GameTimeComplete=function(){this.game_timer.removeEventListener(egret.TimerEvent.TIMER,this.GameTimeFun,this),this.game_timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.GameTimeComplete,this),this.game_timer.stop(),this.dangerEffect_timer.removeEventListener(egret.TimerEvent.TIMER,this.TimeDangerFunc,this),this.dangerEffect_timer.stop(),GameController.getInstance().TimeOver()},n.SetNum=function(e){var t=parseInt((e/10).toString()),i=parseInt((e%10).toString());this.time_num_1.source="time_"+t.toString()+"_png",this.time_num_2.source="time_"+i.toString()+"_png"},t}(eui.Component);egret.registerClass(GameTimeControl,"GameTimeControl");var GameTipPage=function(e){function t(t){e.call(this),this.skinName="src/components/GameTipSkin.exml",this.btn_close_tip.addEventListener(egret.TouchEvent.TOUCH_TAP,this.CloseBtnOnClick,this),this.myStage=t,this.myStage.addChild(this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.CloseBtnOnClick=function(){null!=this.myStage&&(this.myStage.removeChild(this),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.CloseBtnOnClick,this)),GameController.getInstance().PlayStartBtnEffect()},t}(eui.Component);egret.registerClass(GameTipPage,"GameTipPage");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this)},n.onThemeLoadComplete=function(){RES.loadGroup("loading"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},n.onResourceLoadComplete=function(e){"loading"==e.groupName&&(this.loadingUI=new GameLoading,this.stage.addChild(this.loadingUI),RES.loadGroup("preload"),this.isThemeLoadEnd=!0),"preload"==e.groupName&&(this.stage.removeChild(this.loadingUI),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},n.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingUI.setProgress(e.itemsLoaded,e.itemsTotal)},n.startCreateScene=function(){GameController.getInstance().GameInit(this)},n.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,n){function s(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);