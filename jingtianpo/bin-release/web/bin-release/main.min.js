var AssetAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getAsset=function(e,t,i){function s(s){t.call(i,s,e)}if(RES.hasRes(e)){var n=RES.getRes(e);n?s(n):RES.getResAsync(e,s,this)}else RES.getResByUrl(e,s,this,RES.ResourceItem.TYPE_IMAGE)},e}();egret.registerClass(AssetAdapter,"AssetAdapter",["eui.IAssetAdapter"]);var MovieClipGroup=function(e){function t(){e.call(this),this.source="enemyRole"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=RES.getRes(this.source+"_json"),i=RES.getRes(this.source+"_png"),s=new egret.MovieClipDataFactory(t,i),n=new egret.MovieClip(s.generateMovieClipData(this.source));n.play(-1),this.addChild(n)},t}(eui.Group);egret.registerClass(MovieClipGroup,"MovieClipGroup");var GameBackground=function(e){function t(){e.call(this),this.speed=2,this.stageH=0,this.imgCount=0,this.skinName="src/gexml/GameBackgroundSkin.exml",this.imgArr=[],this.imgArr.push(this.bg1),this.imgArr.push(this.bg2),this.stageH=-this.bg2.y,this.imgCount=this.imgArr.length}__extends(t,e);var i=(__define,t),s=i.prototype;return s.StartScroll=function(){this.maskbg.visible=!1,this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},s.StopScroll=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.maskbg.visible=!0},s.enterFrameHandler=function(e){for(var t=0;t<this.imgCount;t++){var i=this.imgArr[t];i.y+=this.speed,i.y>=this.stageH&&(i.y=-this.stageH)}},t}(eui.Component);egret.registerClass(GameBackground,"GameBackground");var GameBoomEffect=function(e){function t(){e.call(this),this.skinName="src/gexml/GameBoomEffectSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.PlayEffect=function(e){var t=RES.getRes("suipian_json"),i=RES.getRes("suipian_png"),s=new egret.MovieClipDataFactory(t,i),n=new egret.MovieClip(s.generateMovieClipData("suipian"));this.addChild(n),n.width=this.width,n.play(1),this.boom=n,n.addEventListener(egret.Event.COMPLETE,this.completeHandle,this);var r=egret.Tween.get(n);n.alpha=0,r.to({alpha:1},800);var o=egret.Tween.get(this.img_boom);o.to({alpha:0,scaleX:3,scaleY:3},500,egret.Ease.quadInOut)},s.completeHandle=function(){var e=this,t=egret.Tween.get(e.boom);t.to({alpha:0},1e3).call(function(){e.boom.parent&&e.boom.parent.removeChild(e.boom),GameController.getInstance().FirstPage()})},t}(eui.Component);egret.registerClass(GameBoomEffect,"GameBoomEffect");var GameBullet=function(e){function t(){e.call(this),this.skinName="src/gexml/GameBulletSkin.exml"}__extends(t,e);var i=__define,s=t,n=s.prototype;return i(n,"BulletType",function(){return this.type},function(e){this.myBullet.visible=!1,this.enemyBullet.visible=!1,e==t.GAME_BULLET_MY?this.myBullet.visible=!0:e==t.GAME_BULLET_ENEMY&&(this.enemyBullet.visible=!0),this.type=e}),t.GAME_BULLET_MY="game_bullet_my",t.GAME_BULLET_ENEMY="game_bullet_enemy",t}(eui.Component);egret.registerClass(GameBullet,"GameBullet");var GameController=function(){function e(){}var t=__define,i=e,s=i.prototype;return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},s.GameEnter=function(e){this.initGame(),e&&(this.gameStage=e,this.BoomPage())},t(s,"GameType",function(){return this.gameType},function(e){this.gameType=e}),s.initGame=function(){this.gamePageOne=new GamePageOne,this.gamePageTwo=new GamePageTwo,this.gamePage=new GamePage,this.gamePopup=new GamePopup,this.gamePageThree=new GamePageThree,this.boomPage=new GameBoomEffect,this.gameSound=new GameSound,this.gameSound.PlaySound()},s.BoomPage=function(){this.gameStage.addChild(this.boomPage),this.boomPage.PlayEffect(this.gameStage)},s.GameRestart=function(){this.gameStage.removeChild(this.gamePageThree),this.TwoPage()},s.PlaySound=function(e){e?this.gameSound.PlaySound():this.gameSound.StopSound()},s.GamePage=function(){this.gamePageTwo.parent&&this.gamePageTwo.parent.removeChild(this.gamePageTwo),this.gameStage.addChild(this.gamePage),this.gamePage.StartGame(e.getInstance().GameType)},s.ThreePage=function(){this.gamePopup.parent&&this.gamePopup.parent.removeChild(this.gamePopup),this.gameStage.addChild(this.gamePageThree),this.gamePageThree.PlayEffect(e.getInstance().GameType)},s.TwoPage=function(){this.gamePageOne.parent&&this.gamePageOne.parent.removeChild(this.gamePageOne),this.gameStage.addChild(this.gamePageTwo),this.gamePageTwo.PlayeEffect()},s.PopupPage=function(e){this.gameStage.addChild(this.gamePopup),this.gamePopup.x=this.gameStage.width/2-this.gamePopup.width/2,this.gamePopup.y=this.gameStage.height/2-this.gamePopup.height/2,this.gamePopup.PopupEffect(e)},s.FirstPage=function(){this.boomPage.parent&&this.boomPage.parent.removeChild(this.boomPage),this.gameStage.addChild(this.gamePageOne),this.gamePageOne.PlayEffect()},e}();egret.registerClass(GameController,"GameController");var GameObjectPool=function(){function e(){}var t=(__define,e);t.prototype;return e.ProduceEnemyRole=function(){var t;return null==e.enemyRoleDict&&(e.enemyRoleDict=[]),e.enemyRoleDict.length>0?t=e.enemyRoleDict.pop():(t=new GameRole,t.CreateRole(GameRole.GAME_ROLE_ENEMY)),t},e.ReclaimEnemyRole=function(t){null==e.enemyRoleDict&&(e.enemyRoleDict=[]),-1==e.enemyRoleDict.indexOf(t)&&e.enemyRoleDict.push(t)},e.ProduceBullet=function(t){var i;null==e.bulletDict[t]&&(e.bulletDict[t]=[]);var s=e.bulletDict[t];return s.length>0?i=s.pop():(i=new GameBullet,i.BulletType=t),i},e.ReclaimBullet=function(t,i){null==e.bulletDict[i]&&(e.bulletDict[i]=[]);var s=e.bulletDict[i];-1==s.indexOf(t)&&t.parent&&s.push(t)},e.bulletDict={},e}();egret.registerClass(GameObjectPool,"GameObjectPool");var GamePage=function(e){function t(){e.call(this),this.gameTimerCount=30,this.myBulletSpeed=1,this.enemyBulletSpeed=1,this.stageH=0,this.gameScoreCount=1,this.gameBloodCount=5,this.initGame()}__extends(t,e);var i=__define,s=t,n=s.prototype;return n.initGame=function(){this.enemyPlayers=[],this.myBullets=[],this.enemyBullets=[],this.gameTimer=new egret.Timer(1e3,0),this.enemyTimer=new egret.Timer(800),this.gameBG=new GameBackground,this.addChild(this.gameBG),this.myPlayer=new GameRole(300),this.addChild(this.myPlayer),this.myPlayer.scaleX=2,this.myPlayer.scaleY=2,this.setChildIndex(this.myPlayer,50),this.timeTip=new GameTimeIcon,this.addChild(this.timeTip),this.timeTip.TimeNumber=30,this.timeTip.x=50,this.timeTip.y=10,this.setChildIndex(this.timeTip,1e3),this.scoreTip=new GameScoreIcon,this.addChild(this.scoreTip),this.scoreTip.ScoreNumber=0,this.scoreTip.x=450,this.scoreTip.y=10,this.setChildIndex(this.scoreTip,1e3),this.playerInfo=new GamePlayerInfo,this.addChild(this.playerInfo),this.playerInfo.ManBlood=5,this.playerInfo.scaleX=1,this.playerInfo.scaleY=1,this.playerInfo.x=0,this.playerInfo.y=850,this.setChildIndex(this.scoreTip,1e3),this.stageH=this.gameBG.height},n.StartGame=function(e){this.gameRoleType=e,this.gameTimerCount=30,this.gameScoreCount=1,this.enemyPlayers=[],this.myBullets=[],this.enemyBullets=[],this.gameBloodCount=5,this.myPlayer.x=200,this.myPlayer.y=700,this.myPlayer.CreateRole(GameRole.GAME_ROLE_MY),this.myPlayer.TouchMove=!0,this.myPlayer.Fire=!0,this.myPlayer.visible=!0,this.myPlayer.addEventListener(GameRole.GAME_EVENT_FIRE,this.FireHandle,this),this.addEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.gameTimer.addEventListener(egret.TimerEvent.TIMER,this.gameTimerHandle,this),this.enemyTimer.addEventListener(egret.TimerEvent.TIMER,this.createEnemyRole,this),this.gameTimer.start(),this.enemyTimer.start(),this.gameBG.StartScroll()},i(n,"gameRoleType",void 0,function(e){e&&(this.playerInfo.ManName=e,this.playerInfo.ManIcon=e)}),n.gameViewUpdate=function(){this.gameHitTest();var e,t=0,i=this.myBullets.length,s=[];for(t=0;i>t;t++)e=this.myBullets[t],e.y-=10*this.myBulletSpeed,e.y<-e.height&&s.push(e);this.reclaimBullet(s,GameBullet.GAME_BULLET_MY),s=[];var n,r=this.enemyPlayers.length;for(t=0;r>t;t++)n=this.enemyPlayers[t],n.y+=5*this.myBulletSpeed,n.y>this.stageH&&s.push(n);this.reclimEnemy(s),s=[];var o=this.enemyBullets.length;for(t=0;o>t;t++)e=this.enemyBullets[t],e.y+=10*this.myBulletSpeed,e.y>this.stageH&&s.push(e);this.reclaimBullet(s,GameBullet.GAME_BULLET_ENEMY),this.upateGameState()},n.gameTimerHandle=function(){this.gameTimerCount-=1,this.gameTimerCount>=0?this.timeTip.TimeNumber=this.gameTimerCount:this.gameStop()},n.upateGameState=function(){this.scoreTip.ScoreNumber=this.gameScoreCount,this.playerInfo.ManBlood=this.gameBloodCount,this.playerInfo.ManBlood<=0&&this.gameStop()},n.gameStop=function(){this.gameBG.StopScroll(),this.myPlayer.Fire=!1,this.myPlayer.TouchMove=!1,this.myPlayer.visible=!1,this.gameTimer.stop(),this.enemyTimer.stop(),this.myPlayer.removeEventListener(GameRole.GAME_EVENT_FIRE,this.FireHandle,this),this.removeEventListener(egret.Event.ENTER_FRAME,this.gameViewUpdate,this),this.gameTimer.removeEventListener(egret.TimerEvent.TIMER,this.gameTimerHandle,this),this.enemyTimer.removeEventListener(egret.TimerEvent.TIMER,this.createEnemyRole,this),this.reclimAll(),GameController.getInstance().PopupPage(this.gameScoreCount)},n.createEnemyRole=function(){var e=GameObjectPool.ProduceEnemyRole();e.x=Math.random()*(640-e.width),e.y=100*Math.random(),e.scaleX=1.5,e.scaleY=1.5,e.Fire=!0,e.AnimationPlay=!0,this.addChild(e),this.setChildIndex(e,10),this.enemyPlayers.push(e),e.addEventListener(GameRole.GAME_EVENT_FIRE,this.FireHandle,this)},n.FireHandle=function(e){var t;e.target==this.myPlayer?(t=GameObjectPool.ProduceBullet(GameBullet.GAME_BULLET_MY),t.x=this.myPlayer.x+20,t.y=this.myPlayer.y-50,this.addChild(t),this.setChildIndex(t,2),this.myBullets.push(t)):(t=GameObjectPool.ProduceBullet(GameBullet.GAME_BULLET_ENEMY),t.x=e.target.x+20,t.y=e.target.y+50,this.addChild(t),this.setChildIndex(t,2),this.enemyBullets.push(t))},n.gameHitTest=function(){var e,t,i,s,n,r=this.myBullets.length,o=this.enemyPlayers.length,a=this.enemyBullets.length,h=[],l=[],m=[];for(e=0;r>e;e++)for(i=this.myBullets[e],t=0;o>t;t++)n=this.enemyPlayers[t],this.hitTest(i,n)&&(this.gameScoreCount+=1,h.push(i),m.push(n));for(this.reclaimBullet(h,GameBullet.GAME_BULLET_MY),this.reclimEnemy(m),h=[],m=[],r=this.myBullets.length,a=this.enemyBullets.length,e=0;r>e;e++)for(i=this.myBullets[e],t=0;a>t;t++)s=this.enemyBullets[t],this.hitTest(i,s)&&(h.push(i),l.push(s));for(this.reclaimBullet(h,GameBullet.GAME_BULLET_MY),this.reclaimBullet(l,GameBullet.GAME_BULLET_ENEMY),h=[],l=[],a=this.enemyBullets.length,e=0;a>e;e++)s=this.enemyBullets[e],this.hitTest(s,this.myPlayer)&&(this.gameBloodCount-=1,l.push(s));for(this.reclaimBullet(l,GameBullet.GAME_BULLET_ENEMY),o=this.enemyPlayers.length,e=0;o>e;e++)n=this.enemyPlayers[e],this.hitTest(n,this.myPlayer)&&this.gameStop()},n.reclaimBullet=function(e,t){for(var i,s=e.length,n=0;s>n;n++)i=e[n],i.parent?(i.parent.removeChild(i),GameObjectPool.ReclaimBullet(i,t),t==GameBullet.GAME_BULLET_MY?this.myBullets.splice(this.myBullets.indexOf(i),1):this.enemyBullets.splice(this.enemyBullets.indexOf(i),1)):(console.log("有子弹为空",i.BulletType),i=null)},n.reclimEnemy=function(e){for(var t,i=(e.length,0);i<e.length;i++)t=e[i],t.parent?(t.parent.removeChild(t),GameObjectPool.ReclaimEnemyRole(t),t.Fire=!1,t.removeEventListener(GameRole.GAME_EVENT_FIRE,this.FireHandle,this),this.enemyPlayers.splice(this.enemyPlayers.indexOf(t),1)):console.log("有敌人为空",t)},n.reclimAll=function(){var e,t,i=0;for(i=0;i<this.enemyPlayers.length;i++)e=this.enemyPlayers[i],e.parent&&(e.parent.removeChild(e),GameObjectPool.ReclaimEnemyRole(e),e.Fire=!1,e.removeEventListener(GameRole.GAME_EVENT_FIRE,this.FireHandle,this));for(i=0;i<this.enemyBullets.length;i++)t=this.enemyBullets[i],t.parent&&(t.parent.removeChild(t),GameObjectPool.ReclaimBullet(t,GameBullet.GAME_BULLET_ENEMY));for(i=0;i<this.myBullets.length;i++)t=this.myBullets[i],t.parent&&(t.parent.removeChild(t),GameObjectPool.ReclaimBullet(t,GameBullet.GAME_BULLET_MY))},n.hitTest=function(e,t){var i=e.getBounds(),s=t.getBounds();return i.x=e.x,i.y=e.y,s.x=t.x,s.y=t.y,i.intersects(s)},t}(egret.DisplayObjectContainer);egret.registerClass(GamePage,"GamePage");var GamePageOne=function(e){function t(){e.call(this),this.showX_xie=0,this.showX_liu=0,this.skinName="src/gexml/GamePageOneSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.PlayEffect=function(){this.init(),this.playImgEffect()},s.init=function(){this.txtArr=[],this.txtArr.push(this.txt1),this.txtArr.push(this.txt2),this.txtArr.push(this.txt3),this.txtArr.push(this.txt4);for(var e=0;e<this.txtArr.length;e++)this.txtArr[e].alpha=0;this.showX_xie=this.img_xie.x,this.showX_liu=this.img_liu.x,this.img_xie.x=-250,this.img_liu.x=650,this.btn_big.visible=!1,this.btn_small.visible=!1,this.btnTimer=new egret.Timer(500,0),this.btnTimer.addEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.btn_big.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.btn_small.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.sound_play.addEventListener(egret.TouchEvent.TOUCH_TAP,this.soundPlayOnClick,this),this.sound_stop.addEventListener(egret.TouchEvent.TOUCH_TAP,this.soundStopOnClick,this)},s.soundPlayOnClick=function(){this.sound_play.visible=!1,this.sound_stop.visible=!0,GameController.getInstance().PlaySound(!0)},s.soundStopOnClick=function(){this.sound_play.visible=!0,this.sound_stop.visible=!1,GameController.getInstance().PlaySound(!1)},s.playImgEffect=function(){var e=this,t=egret.Tween.get(e.img_bg);this.img_bg.alpha=0,t.to({alpha:1},300);var i=egret.Tween.get(this.img_xie);i.to({x:this.showX_xie},500,egret.Ease.quadIn);var s=egret.Tween.get(this.img_liu);s.to({x:this.showX_liu},500,egret.Ease.quadIn).call(function(){i=null,s=null,e.playWordsEffect()})},s.playWordsEffect=function(){function e(){s+=1,s<i.length?(n=egret.Tween.get(i[s]),n.to({alpha:1},1e3).call(e)):(t.btn_small.visible=!0,t.btnTimer.start())}var t=this,i=this.txtArr,s=0,n=egret.Tween.get(i[s]);n.to({alpha:1},1e3).call(e)},s.btnTimerHandle=function(){this.btn_big.visible=!this.btn_big.visible,this.btn_small.visible=!this.btn_small.visible},s.btnOnClickHandle=function(){this.btnTimer.stop(),this.btnTimer.removeEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.btn_big.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.btn_small.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),GameController.getInstance().TwoPage()},t}(eui.Component);egret.registerClass(GamePageOne,"GamePageOne");var GamePageThree=function(e){function t(){e.call(this),this.turnUrl1="http://m.maoyan.com/movie/248553?_v_=yes",this.turnUrl0="https://mdianying.baidu.com/info/movie/schedule?movie_id=10271&sfrom=wise_shoubai&sub_channel=ktv_jingtianpo2",this.skinName="src/gexml/GamePageThreeSkin.exml",this.btnTimer=new egret.Timer(500)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.PlayEffect=function(e){this.btnTimer.addEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.group_turn_big.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),this.group_turn_small.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),this.group_restart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnRestartOnClick,this),this.group_turn_0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.turnBtn0OnClick,this),this.group_turn_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.turnBtn1OnClick,this),this.group_turn_0.visible=!1,this.group_turn_1.visible=!1,this.img_xie.visible=!1,this.img_liu.visible=!1;var t=this.img_txt.y,i=this;i.group_restart.visible=!1,i.group_turn_big.visible=!1,i.group_turn_small.visible=!1;var s=egret.Tween.get(i.img_txt);if(i.img_txt.y=-250,s.to({y:t},1200,egret.Ease.quartIn).call(function(){i.group_restart.visible=!0,i.group_turn_small.visible=!0,s=null,r=null,i.btnTimer.start()}),e==GamePlayerInfo.MAN_NAME_MAJIN){var n=this.img_xie.x,r=egret.Tween.get(i.img_xie);i.img_xie.x=-250,i.img_xie.visible=!0,r.to({x:n},1e3,egret.Ease.cubicIn)}else{var n=this.img_liu.x,r=egret.Tween.get(i.img_liu);i.img_liu.x=700,i.img_liu.visible=!0,r.to({x:n},1e3,egret.Ease.cubicIn)}},s.btnTimerHandle=function(){this.group_turn_big.visible=!this.group_turn_big.visible,this.group_turn_small.visible=!this.group_turn_small.visible},s.btnTurnOnClick=function(){this.btnTimer.stop(),this.group_turn_big.visible=!1,this.group_turn_small.visible=!1,this.playTurnTwoBtnEffect()},s.playTurnTwoBtnEffect=function(){var e=egret.Tween.get(this.group_turn_0);this.group_turn_0.visible=!0,this.group_turn_0.alpha=0,e.to({alpha:1},1e3);var t=egret.Tween.get(this.group_turn_1);this.group_turn_1.visible=!0,this.group_turn_1.alpha=0,t.to({alpha:1},1e3)},s.turnBtn0OnClick=function(){window.location.href=this.turnUrl0,this.stopEffect()},s.turnBtn1OnClick=function(){window.location.href=this.turnUrl1,this.stopEffect()},s.btnRestartOnClick=function(){this.stopEffect(),GameController.getInstance().GameRestart()},s.stopEffect=function(){this.btnTimer.stop(),this.btnTimer.removeEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.group_turn_big.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),this.group_turn_small.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),this.group_restart.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnRestartOnClick,this),this.group_turn_0.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.turnBtn0OnClick,this),this.group_turn_1.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.turnBtn1OnClick,this)},t}(eui.Component);egret.registerClass(GamePageThree,"GamePageThree");var GamePageTwo=function(e){function t(){e.call(this),this.isDefaultSelect=!0,this.skinName="src/gexml/GamePageTwoSkin.exml",this.btnTimer=new egret.Timer(500)}__extends(t,e);var i=(__define,t),s=i.prototype;return s.PlayeEffect=function(){this.btnTimer.addEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.btn_start_big.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.btn_start_small.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.img_xie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.imgXieOnClick,this),this.img_liu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.imgLiuOnClick,this),this.btnTimer.start(),this.btn_start_big.visible=!1,this.btn_select1.visible=!1,this.btn_select0.visible=!0,this.btn_start_small.visible=!0,this.isDefaultSelect=!0},s.imgXieOnClick=function(){this.isDefaultSelect=!0,this.btn_select0.visible=this.isDefaultSelect,this.btn_select1.visible=!this.isDefaultSelect},s.imgLiuOnClick=function(){this.isDefaultSelect=!1,this.btn_select0.visible=this.isDefaultSelect,this.btn_select1.visible=!this.isDefaultSelect},s.btnTimerHandle=function(){this.btn_start_big.visible=!this.btn_start_big.visible,this.btn_start_small.visible=!this.btn_start_small.visible},s.btnOnClickHandle=function(){this.btnTimer.stop(),this.btnTimer.removeEventListener(egret.TimerEvent.TIMER,this.btnTimerHandle,this),this.btn_start_big.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.btn_start_small.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnOnClickHandle,this),this.img_xie.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.imgXieOnClick,this),this.img_liu.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.imgLiuOnClick,this);var e=GamePlayerInfo.MAN_NAME_CHEJIAWEI;this.isDefaultSelect&&(e=GamePlayerInfo.MAN_NAME_MAJIN),GameController.getInstance().GameType=e,GameController.getInstance().GamePage()},t}(eui.Component);egret.registerClass(GamePageTwo,"GamePageTwo");var GamePlayerInfo=function(e){function t(){e.call(this),this.bloodValue=0,this.skinName="src/gexml/GamePlayerInfoSkin.exml",this.bloodArr=[],this.bloodArr.push(this.blood0),this.bloodArr.push(this.blood1),this.bloodArr.push(this.blood2),this.bloodArr.push(this.blood3),this.bloodArr.push(this.blood4)}__extends(t,e);var i=__define,s=t,n=s.prototype;return i(n,"ManName",void 0,function(e){this.manName.visible=!1,this.manName0.visible=!1,e==t.MAN_NAME_CHEJIAWEI?this.manName.visible=!0:e==t.MAN_NAME_MAJIN&&(this.manName0.visible=!0)}),i(n,"ManIcon",void 0,function(e){e==t.MAN_NAME_CHEJIAWEI?this.manIcon.source="man_lqy_png":e==t.MAN_NAME_MAJIN&&(this.manIcon.source="man_xtf_png")}),i(n,"ManBlood",function(){return this.bloodValue},function(e){var t=0>e?0:e;t=e>5?5:e;for(var i=0;i<this.bloodArr.length;i++)this.bloodArr[i].alpha=0;for(var s=0;e>s;s++)this.bloodArr[s].alpha=1;this.bloodValue=t}),t.MAN_NAME_CHEJIAWEI="chejiawei",t.MAN_NAME_MAJIN="majin",t}(eui.Component);egret.registerClass(GamePlayerInfo,"GamePlayerInfo");var GamePopup=function(e){function t(){e.call(this),this.skinName="src/gexml/GamePopupSkin.exml"}__extends(t,e);var i=(__define,t),s=i.prototype;return s.PopupEffect=function(e){this.btn_turn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),this.txt_score.text="您的最终得分为 "+e.toString()+" 分",this.sss1.visible=!1,this.sss2.visible=!1,this.sss3.visible=!1,10>=e?this.sss1.visible=!0:25>=e?(this.sss1.visible=!0,this.sss2.visible=!0):e>25&&(this.sss1.visible=!0,this.sss2.visible=!0,this.sss3.visible=!0),this.popupEffect()},s.popupEffect=function(){var e=egret.Tween.get(this);this.alpha=0,e.to({alpha:1},1e3,egret.Ease.quadOut).call(function(){e=null})},s.btnTurnOnClick=function(){this.btn_turn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.btnTurnOnClick,this),GameController.getInstance().ThreePage()},t}(eui.Component);egret.registerClass(GamePopup,"GamePopup");var GameRole=function(e){function t(t){void 0===t&&(t=800),e.call(this),this.isShooted=!1,this.touchDistance=new egret.Point,this.fireTimer=new egret.Timer(t),this.fireTimer.addEventListener(egret.TimerEvent.TIMER,this.createBullet,this)}__extends(t,e);var i=__define,s=t,n=s.prototype;return n.CreateRole=function(e){var i;if(e==t.GAME_ROLE_ENEMY){var s=RES.getRes("enemyRole_json"),n=RES.getRes("enemyRole_png"),r=new egret.MovieClipDataFactory(s,n);i=new egret.MovieClip(r.generateMovieClipData("enemy")),this.addChild(i),i.play(-1)}else if(e==t.GAME_ROLE_MY){var s=RES.getRes("myRole_json"),n=RES.getRes("myRole_png"),r=new egret.MovieClipDataFactory(s,n);i=new egret.MovieClip(r.generateMovieClipData("myRole")),this.addChild(i),i.play(-1)}this.role=i},i(n,"IsShooted",function(){return this.isShooted},function(e){this.isShooted=e}),i(n,"AnimationPlay",void 0,function(e){this.role&&(e?this.role.play(-1):this.role.stop())}),i(n,"Fire",void 0,function(e){this.role&&(e?this.fireTimer.start():this.fireTimer.stop())}),n.createBullet=function(e){this.dispatchEventWith(t.GAME_EVENT_FIRE)},i(n,"TouchMove",void 0,function(e){this.role&&(e?(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBeginHandle,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.TouchBeginHandle,this)):(this.removeEventListener(egret.TouchEvent.TOUCH_END,this.TouchBeginHandle,this),this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.TouchBeginHandle,this)))}),n.TouchBeginHandle=function(e){var t=e.currentTarget;this.touchDistance.x=e.stageX-t.x,this.touchDistance.y=e.stageY-t.y,this.parent.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMoveHandle,this)},n.TouchEndHandle=function(){this.parent.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.TouchMoveHandle,this)},n.TouchMoveHandle=function(e){this.x=e.stageX-this.touchDistance.x,this.y=e.stageY-this.touchDistance.y},t.GAME_ROLE_ENEMY="game_role_enemy",t.GAME_ROLE_MY="game_role_my",t.GAME_EVENT_FIRE="game_event_fire",t}(eui.Component);egret.registerClass(GameRole,"GameRole");var GameScoreIcon=function(e){function t(){e.call(this),this.skinName="src/gexml/GameScoreIconSkin.exml"}__extends(t,e);var i=__define,s=t,n=s.prototype;return i(n,"ScoreNumber",void 0,function(e){var t=parseInt((e/10).toString()),i=parseInt((e%10).toString());this.tenNum.source="time_"+t.toString()+"_png",this.singleNum.source="time_"+i.toString()+"_png"}),t}(eui.Component);egret.registerClass(GameScoreIcon,"GameScoreIcon");var GameShock=function(){function e(){this.mapPoss=[new egret.Point(0,10),new egret.Point(10,5),new egret.Point(-10,-5)],this.spritePoss=[new egret.Point(10,0),new egret.Point(-10,0),new egret.Point(10,0)],this._shockLength=0,this._shockCount=0,this._rx=0,this._ry=0,this._type=0,this._repeatCount=0,this._isRunning=!1}var t=__define,i=e,s=i.prototype;return s.destroy=function(){this.stop(),this._target=null},s.shock=function(t){void 0===t&&(t=0),this._type=t,this._type==e.MAP?(this._shockPoss=this.mapPoss.concat(),this._shockLength=this._shockPoss.length):this._type==e.SPRITE&&(this._shockPoss=this.spritePoss.concat(),this._shockLength=this._shockPoss.length)},s.start=function(e){void 0===e&&(e=1),this._isRunning&&this.stop(),this.repeatCount=e,this._shockCount=0,this._target&&(this._isRunning=!0,this._rx=this._target.x,this._ry=this._target.y,egret.Ticker.getInstance().register(this.onShockEnter,this))},s.stop=function(){this._isRunning=!1,this._target&&(this._target.x=this._rx,this._target.y=this._ry,egret.Ticker.getInstance().unregister(this.onShockEnter,this))},s.onShockEnter=function(e){var t=this._shockLength*this._repeatCount;if(this._shockCount>=t)return void this.stop();var i=this._shockCount%this._shockLength,s=this._shockPoss[i];this._target&&(this._target.x=this._rx+s.x,this._target.y=this._ry+s.y),this._shockCount++},t(s,"repeatCount",function(){return this._repeatCount},function(e){this._repeatCount=e}),e.MAP=0,e.SPRITE=1,e}();egret.registerClass(GameShock,"GameShock");var GameSound=function(){function e(){this.sound=RES.getRes("bg_music_mp3")}var t=(__define,e),i=t.prototype;return i.PlaySound=function(){this.channel=this.sound.play()},i.StopSound=function(){this.channel.stop()},e}();egret.registerClass(GameSound,"GameSound");var GameTimeIcon=function(e){function t(){e.call(this),this.skinName="src/gexml/GameTimeIcon.exml"}__extends(t,e);var i=__define,s=t,n=s.prototype;return i(n,"TimeNumber",void 0,function(e){var t=parseInt((e/10).toString()),i=parseInt((e%10).toString());this.tenNum.source="time_"+t.toString()+"_png",this.singleNum.source="time_"+i.toString()+"_png"}),t}(eui.Component);egret.registerClass(GameTimeIcon,"GameTimeIcon");var LoadingPage=function(e){function t(){e.call(this),this.progressWidth=0,this.skinName="src/gexml/LoadingPageSkin.exml",this.loadingTimer=new egret.Timer(50),this.loadingTimer.addEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this.loadingTimer.start()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.timerHandle=function(){this.img_time.visible=!this.img_time.visible},s.setProgress=function(e,t){var i=Math.floor(e/t*100);if(this.loading_number.text="已完成"+i.toString()+"%",this.loadingTimer&&i>=80){var s=new GameShock;s.shock(GameShock.MAP),s._target=this,s.start(20),this.img_time.visible=!0,this.loadingTimer.stop(),this.loadingTimer.removeEventListener(egret.TimerEvent.TIMER,this.timerHandle,this),this.loadingTimer=null}},t}(eui.Component);egret.registerClass(LoadingPage,"LoadingPage");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},s.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.apply(this,arguments),this.isThemeLoadEnd=!1,this.isResourceLoadEnd=!1}__extends(t,e);var i=(__define,t),s=i.prototype;return s.createChildren=function(){e.prototype.createChildren.call(this);var t=new AssetAdapter;this.stage.registerImplementation("eui.IAssetAdapter",t),this.stage.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},s.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this)},s.onThemeLoadComplete=function(){RES.loadGroup("loading"),this.createScene()},s.onResourceLoadComplete=function(e){"loading"==e.groupName&&(this.loadingPage=new LoadingPage,this.stage.addChild(this.loadingPage),RES.loadGroup("preload"),this.isThemeLoadEnd=!0),"preload"==e.groupName&&(this.stage.removeChild(this.loadingPage),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},s.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},s.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},s.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},s.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingPage.setProgress(e.itemsLoaded,e.itemsTotal)},s.startCreateScene=function(){GameController.getInstance().GameEnter(this)},s.onButtonClick=function(e){var t=new eui.Panel;t.title="Title",t.horizontalCenter=0,t.verticalCenter=0,this.addChild(t)},t}(eui.UILayer);egret.registerClass(Main,"Main");var ThemeAdapter=function(){function e(){}var t=(__define,e),i=t.prototype;return i.getTheme=function(e,t,i,s){function n(e){t.call(s,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),i.call(s))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_TEXT)},e}();egret.registerClass(ThemeAdapter,"ThemeAdapter",["eui.IThemeAdapter"]);